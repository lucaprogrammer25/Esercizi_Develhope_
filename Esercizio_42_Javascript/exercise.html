<html>

<body>
  <div id="container">
    <form>
      <div>
        <label>Title</label>
        <input type="text" id="todo-title" />
      </div>
      <div>
        <label>Completed</label>
        <input type="checkbox" id="todo-completed" />
      </div>

      <button type="submit" id="submit-todo">Invia</button>
    </form>
  </div>
</body>

</html>

<script>
  // code here
  const $todoTitle = document.querySelector("#todo-title");
  const $checkbox = document.querySelector("#todo-completed");
  const $submitBtn = document.querySelector("#submit-todo")
  const $form = document.querySelector("form");

  API_URL = "https://jsonplaceholder.typicode.com/posts"


  const state = {
    data: [],
  }


  const outError = (error) => {
    console.error(error)
  };


  const fetchData = async (event) => {
    event.preventDefault(event)

    const todoTitleValue = $todoTitle.value;
    const checkboxValue = $checkbox.checked;

    if (todoTitleValue === "" || checkboxValue === false) {
      outError("Compila il titolo e spunta la casella completed");
      return
    }

    try {
      const response = await fetch(API_URL, {
        method: "POST",
        body: JSON.stringify({
          title: todoTitleValue,
          completed: checkboxValue,

        }),
        headers: {
          "Content-Type": "application/json",
        },
      })


      state.data = await response.json();
      console.log(state.data)
    } catch (error) {
      outError(error)

    }

  }


  const init = async () => {
    $form.addEventListener("submit", fetchData);
  };

  init();


</script>